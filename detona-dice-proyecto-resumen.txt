# Proyecto Detona Dice - Resumen Completo

## Contexto del Proyecto
Detona Dice es un juego multijugador en tiempo real basado en dados con elementos de combate, exploración de mapas, tienda, mejoras y sistemas de niveles. El juego se desarrolla en una arquitectura de microservicios con un frontend React y un backend Node.js/Express con WebSockets para la comunicación en tiempo real.

## Estructura del Proyecto
- packages/web: Frontend React con Vite
- packages/server: Backend Node.js/Express con Socket.IO
- packages/common: Archivos compartidos entre frontend y backend (no implementado en este análisis)

## Frontend (React/Vite)

### Componentes Principales
- **LoginScreen.tsx**: Pantalla de inicio de sesión donde los jugadores ingresan su nombre de usuario
- **LobbyScreen.tsx**: Sala de espera donde los jugadores pueden unirse a partidas
- **GameRouter.tsx**: Componente encargado de enrutar entre las diferentes pantallas del juego
- **Header.tsx**: Componente de cabecera que muestra información general del juego
- **PanelIzquierdo.tsx y PanelDerecho.tsx**: Paneles laterales que contienen información del jugador y controles
- **CombateScreen.tsx**: Pantalla donde ocurren los combates entre jugadores
- **MapaScreen.tsx**: Pantalla que muestra el mapa del juego y permite la navegación
- **TiendaScreen.tsx**: Pantalla de tienda donde los jugadores pueden comprar items
- **PactoScreen.tsx**: Pantalla para hacer pactos o acuerdos especiales
- **SubirNivelScreen.tsx**: Pantalla para gestionar el sistema de niveles
- **ResultsScreen.tsx**: Pantalla que muestra los resultados finales del juego
- **EspectadorScreen.tsx**: Pantalla para jugadores que están observando la partida
- **DadoComponent.tsx**: Componente visual que representa un dado en la interfaz

### Contextos
- **GameContext.tsx**: Contexto global que maneja el estado del juego, incluyendo jugadores, partidas, y estados de juego

### Otros Archivos
- **socket.ts**: Configuración del cliente de WebSocket para la comunicación con el backend
- **App.tsx y App.css**: Componente principal y estilos generales
- **main.tsx**: Punto de entrada de la aplicación React

## Backend (Node.js/Express con Socket.IO)

### Punto de Entrada
- **index.js**: Servidor principal que inicia Express y Socket.IO, y configura las rutas

### Modelos del Juego
- **Jugador.js**: Define la estructura y lógica de un jugador (nombre, vida, nivel, items, etc.)
- **Sala.js**: Define la estructura de una sala de juego con múltiples jugadores
- **PartidaState.js**: Gestiona el estado actual de una partida en curso

### Lógica del Juego
- **dice.js**: Contiene la lógica relacionada con los dados (lanzamientos, resultados, efectos)
- **items.js**: Define los diferentes items disponibles en el juego y sus efectos
- **map.js**: Contiene la lógica del mapa del juego, incluyendo celdas, rutas y eventos
- **mejoras.js**: Define los diferentes tipos de mejoras disponibles para los jugadores

### Manejo de WebSockets
- **index.js (en sockets)**: Configura Socket.IO y gestiona las conexiones
- **lobbyHandlers.js**: Maneja eventos relacionados con la sala de espera (unirse, salir, iniciar partida)
- **gameHandlers.js**: Maneja eventos relacionados con el juego en sí (movimiento, combate, interacciones)

### Almacenamiento
- **memoryStore.js**: Sistema de almacenamiento en memoria para mantener el estado de las partidas y salas

## Funcionalidades del Juego

### Sistema de Combate
- Combates entre jugadores basados en dados
- Sistema de vida y estadísticas
- Diferentes tipos de ataques y defensas

### Sistema de Mapa
- Exploración de un mapa con diferentes celdas
- Eventos aleatorios en el mapa
- Movimiento basado en dados

### Sistema de Economía
- Sistema de monedas y compras en la tienda
- Items y mejoras disponibles para comprar
- Sistema de niveles con recompensas

### Sistema de Multiplayer
- Juego multijugador en tiempo real
- Salas de espera para agrupar jugadores
- Soporte para espectadores

### Sistema de Interacciones
- Pactos entre jugadores
- Mejoras permanentes
- Eventos aleatorios

## Tecnologías Utilizadas
- Frontend: React 19, TypeScript, Vite
- Backend: Node.js, Express, Socket.IO
- Comunicación: WebSockets para interacción en tiempo real
- Despliegue: Vercel (frontend), Render (backend)

## Arquitectura
- Monorepo con workspaces de npm
- Comunicación en tiempo real mediante WebSockets
- Estado del juego gestionado en backend con almacenamiento en memoria
- Interfaz de usuario dinámica con React
